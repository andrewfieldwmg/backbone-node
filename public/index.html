<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
    
    <head>
        <title>listentome.io</title>
        <link href="/css/bootstrap.css" rel="stylesheet">
        <link href="/css/bootstrap-theme.css" rel="stylesheet">
        <link href="/css/font-awesome.css" rel="stylesheet">
        <link href="/css/audioPlayerStyles.css" rel="stylesheet">
        <link href="/css/appStyles.css" rel="stylesheet">
        <link href="/css/bootstrap-slider.css" rel="stylesheet">
       <link href="https://fonts.googleapis.com/css?family=Trocchi" rel="stylesheet">
    </head>

    <body>
     
    <div class="container-fluid">
    
    <div class="row">
        
        <div class="col-lg-12">
              
        <div class="alert alert-danger" id="socket_not_loaded" role="alert">
            <h2 class="text-danger"><strong>Error!</strong> WebSocket server not running.</h2>
        </div>
              
        <div class="alert alert-danger" id="wrong_browser" role="alert">
            <h2 class="text-danger"><strong>Error!</strong> This app only works with the latest versions of Google Chrome.</h2>
        </div>
     
        <div class="alert alert-danger" id="no_audiocontext" role="alert">
            <h2 class="text-danger"><strong>Error!</strong> Your browser doesn't support the Web Audio API.</h2>
        </div>
     
     
        <div id="audio_player_container"></div>
               
        <script type="text/template" id="audio_player_template">
            
            <p>
            <div class="audio-player" style="border-radius: 5px">
                
                <h2><%= streamName %> <i class="fa fa-refresh fa-spin" title="Loading..." aria-hidden="true" data-id=""></i></h2>
                 
                    <div id="mep_0" class="mejs-container svg mejs-audio">
                    <div class="mejs-inner">
                        <div class="mejs-mediaelement">
                            <audio id="audio-player" src="" type="audio/mp3"></audio>
                        </div><div class="mejs-layers">
                    <div class="mejs-poster mejs-layer"></div></div>
                        <div class="mejs-controls">
                            <div class="mejs-button mejs-playpause-button mejs-pause">
                    <button type="button" aria-controls="mep_0" title="Play/Pause" aria-label="Play/Pause"></button></div>
                            
                        <!--<div class="mejs-time-rail" style="width: 0px;">
                        <span class="mejs-time-total" style="width: 0px;">
                            <span class="mejs-time-buffering" style="display: none;"></span>
                        <span class="mejs-time-loaded" style="width: 380px;"></span>
                        <span class="mejs-time-current" style="width: 5px;"></span>
                        <span class="mejs-time-handle" style="left: -5px;"></span>
                        <span class="mejs-time-float" style="display: none; left: 4px;">
                            <span class="mejs-time-float-current">00:00</span>
                            <span class="mejs-time-float-corner"></span></span></span
                        </div>-->
                            
                            <div class="mejs-button mejs-volume-button mejs-mute">
                            <button type="button" aria-controls="mep_0" title="Mute Toggle" aria-label="Mute Toggle"></button></div>
                    
                    <div class="mejs-horizontal-volume-slider mejs-mute">
                        
                        <div class="mejs-horizontal-volume-current"></div>
                        <div class="mejs-horizontal-volume-handle" id="ex1" data-slider-id='ex1Slider' type="text" data-slider-min="0" data-slider-max="1" data-slider-step="0.01" data-slider-value="<%= streamVolume %>"></div>
                    </div></div>
                    
                    <div class="mejs-clear">
    
                        </div>
                    </div>
                    </div>
                </div>
            </p>   
        </script>
   
         
        <div id="username_form_container"></div>
        
        <script type="text/template" id="username_form_template">
            <p>   
                <form id="username-form" class="form" action="">                   
                   <div class="input-group input-group-lg">
                     <input type="text" class="form-control" id="username" placeholder="First things first - what's your name?">
                     <span class="input-group-btn">
                       <button class="btn btn-primary" id="submit-username" type="submit">Go!</button>
                     </span>
                   </div>
               </form>
              </p>
        </script>
        
        
        <div id="message_form_container"></div>
     
        <script type="text/template" id="message_form_template">
            <p>        
                <form class="form" action="">                   
                   <div class="input-group input-group-lg">
                     <input type="text" class="form-control" id="message-text" placeholder="What's up, <%= username %>?">
                     <span class="input-group-btn">
                       <button class="btn btn-primary" id="submit-message" type="submit">Go!</button>
                     </span>
                   </div>
                </form>
            </p>
        </script>
        
        
        <div id="app_controls_container"></div>
        
        <script type="text/template" id="app_controls_template">
            <p>
               <div class="btn-group-horizontal button-wrapper">
                
                    <div class="col-xs-15">            
                        <i class="fa fa-microphone action-icon" data-toggle="tooltip" title="Record Live Audio" id="start-recording" title="Record Live Audio" aria-hidden="true"></i>
                        <button class="btn btn-primary" id="stop-recording" type="submit" style="display: none">Stop Recording</button>
                    </div>
                    
                    <div class="col-xs-15">
                        <input id="audio-file" type="file" accept="audio/mp3, audio/wav" style="display: none"/>
                        <i class="fa fa-file-audio-o action-icon" data-toggle="tooltip" title="Stream MP3 or WAV" id="start-file-stream" title="Stream MP3 or WAV File" aria-hidden="true"></i>  
                    </div>
                    
                    <div class="col-xs-15">   
                        <i class="fa fa-headphones action-icon" data-toggle="tooltip" title="Listen" id="listen" title="Listen" aria-hidden="true"></i>
                    </div>
                    
                    <div class="col-xs-15">
                        <input id="file" type="file" style="display: none"/>
                        <i class="fa fa-upload action-icon" data-toggle="tooltip" title="File Transfer" id="send-file" title="File Transfer" aria-hidden="true"></i>
                     </div>           
                    
                    <div class="col-xs-15">
                        <i class="fa fa-ban action-icon" data-toggle="tooltip" title="Stop All Audio" id="stop" title="Stop All Audio" aria-hidden="true"></i>
                    </div>  
                          
               </div>
           </p>
        </script>
        
        
        <div class="col-xs-12">       
                
        <div id="connected_clients_container"></div>
        
            <script type="text/template" id="connected_clients_template">
                 <p>
                    <h2>Who's online?</h2>
                    <ul class="list-group" id="connected-clients"></ul>
                </p>
            </script>

             
            <div id="messages_container"></div>
             
             
            <script type="text/template" id="messages_template">
                <p>
                    <ul class="list-group scrollable" id="message-results"></ul>
                </p>
            </script>
            
            
           <script type="text/template" id="list_item_template">
                <li class="list-group-item <%= cssClass %>"><strong><%= time %></strong> <%= contentFromUsername %> <strong><%= contentName %></strong>
                <i class="fa fa-refresh fa-spin <%= loaderClass %>" title="Loading..." aria-hidden="true" data-id=""></i>
                </li>
           </script>
           
        </div>

            <iframe name="download-iframe" id="download-iframe" width="1" height="1" frameborder="0" src=""></iframe>

            </div>
        </div>
    </div>
        

        <!-- CORE DEPENDENCIES -->
        <script src="/vendor/jquery-2.0.3.min.js"></script>
        <script src="/vendor/underscore.js"></script>
        <script src="/vendor/backbone.js"></script>
        
        <!-- BOOTSTRAP -->
        <script src="/vendor/tether.min.js"></script>
        <script src="/vendor/bootstrap.js"></script>
        <script src="/vendor/bootstrap-slider.js"></script>
        
        <!--<script src="/vendor/jquery-ui.js"></script>-->
        
        <!-- SOCKET.IO -->
        <script src="/socket.io/socket.io.js"></script>
        <script src="/vendor/socket.io-stream.js"></script>
        
        <!-- APP UTILS and AUDIO FUNCTIONS -->
        <script src="/js/functions/utils.js"></script>
        <script src="/js/functions/playMp3Stream.js"></script>
        <script src="/js/functions/playWavStream.js"></script>
        <script src="/js/functions/recordStream.js"></script>
        
        <!-- START THE APP -->
        <script src="/js/index.js"></script>
        
        <!-- BACKBONE VIEWS -->
        <script src="/js/views/usernameFormView.js"></script>
        <script src="/js/views/audioPlayerView.js"></script>
        <script src="/js/views/messageFormView.js"></script>
        <script src="/js/views/appControlsView.js"></script>
        <script src="/js/views/listItemView.js"></script>
        <script src="/js/views/connectedClientsView.js"></script>
        <script src="/js/views/messagesView.js"></script>
        
    </body>
</html>