<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
    
    <head>
        <title>listentome.io</title>
        <link href="/css/bootstrap.css" rel="stylesheet">
        <link href="/css/bootstrap-theme.css" rel="stylesheet">
        <link href="/css/font-awesome.css" rel="stylesheet">
        <link href="/css/audioPlayerStyles.css" rel="stylesheet">
        <link href="/css/appStyles.css" rel="stylesheet">
        <link href="/css/bootstrap-slider.css" rel="stylesheet">
       <link href="https://fonts.googleapis.com/css?family=Trocchi" rel="stylesheet">
    </head>

    <body>
     
    <div class="container-fluid">
    
    <div class="row">
        
        <div class="col-lg-12">

        
        <h1 class="site-title-h1">
            <span class="pull-left site-title">
                <a title="Go Home" class="deco-none home-link" href="/">
                    listentome.io
                <i class="fa fa-rocket"></i>
                </a>
            </span>
        </h1>
                            
        <div class="alert alert-danger" id="socket_not_loaded" role="alert">
            <h2 class="text-danger"><strong>Error!</strong> WebSocket server not running.</h2>
        </div>
              
        <div class="alert alert-danger" id="wrong_browser" role="alert">
            <h2 class="text-danger"><strong>Error!</strong> This app only works with the latest versions of Google Chrome.</h2>
        </div>
     
        <div class="alert alert-danger" id="no_audiocontext" role="alert">
            <h2 class="text-danger"><strong>Error!</strong> Your browser doesn't support the Web Audio API.</h2>
        </div>
        
        <div id="audio_player_container"></div>
               
        <script type="text/template" id="audio_player_template">
            
            <p>
            <div class="audio-player" style="border-radius: 5px">
                
                <h2><%= streamName %> <i class="fa fa-refresh fa-spin" title="Loading..." aria-hidden="true" data-id=""></i></h2>
                 
                    <div id="mep_0" class="mejs-container svg mejs-audio">
                    <div class="mejs-inner">
                        <div class="mejs-mediaelement">
                            <audio id="audio-player" src="" type="audio/mp3"></audio>
                        </div><div class="mejs-layers">
                    <div class="mejs-poster mejs-layer"></div></div>
                        <div class="mejs-controls">
                            <div class="mejs-button mejs-playpause-button mejs-pause">
                    <button type="button" aria-controls="mep_0" title="Play/Pause" aria-label="Play/Pause"></button></div>
                                                        
                            <!--<div class="mejs-time-rail" style="width: 0px;">
                            <span class="mejs-time-total" style="width: 0px;">
                                <span class="mejs-time-buffering" style="display: none;"></span>
                            <span class="mejs-time-loaded" style="width: 380px;"></span>
                            <span class="mejs-time-current" style="width: 5px;"></span>
                            <span class="mejs-time-handle" style="left: -5px;"></span>
                            <span class="mejs-time-float" style="display: none; left: 4px;">
                                <span class="mejs-time-float-current">00:00</span>
                                <span class="mejs-time-float-corner"></span></span></span
                            </div>-->
                               
                            <div id="volume-controls">                           
                                <div class="mejs-button mejs-volume-button mejs-mute">
                                <button type="button" aria-controls="mep_0" title="Mute Toggle" aria-label="Mute Toggle">
                                </button>
                                </div>
                                                    
                                <div class="mejs-horizontal-volume-slider mejs-mute">                  
                                <div class="mejs-horizontal-volume-handle" id="ex1" data-slider-id='ex1Slider' type="text" data-slider-min="0" data-slider-max="1" data-slider-step="0.01" data-slider-value="<%= streamVolume %>"> 
                                </div>
                            </div>                    
                    
                        </div>
                    
                        </div>
                    
                    </div>
                    </div>
                </div>
            </p>   
        </script>
   
         
        <div id="username_form_container"></div>
        
        <script type="text/template" id="username_form_template">
            <p>   
                <form id="username-form" class="form" action="">                   
                   <div class="input-group input-group-lg">
                     <input type="text" class="form-control user-signup" id="username" placeholder="First things first - what's your name?">
                     <span class="input-group-btn">
                       <button class="btn btn-primary" id="submit-username" type="submit">Go!</button>
                     </span>
                   </div>
               </form>
                
            <form id="user-genre-form" class="form" action="" style="display: none">                   
                   <div class="input-group input-group-lg">
                     <input type="text" class="form-control user-signup" id="user-genre" placeholder="What style of music are you into?">
                     <span class="input-group-btn">
                       <button class="btn btn-primary" id="submit-user-genre" type="submit">Go!</button>
                     </span>
                   </div>
            </form>
            
            <form id="user-location-form" class="form" action="" style="display: none">                   
                   <div class="input-group input-group-lg">
                     <input type="text" class="form-control user-signup" id="user-location" placeholder="Where are you?">
                     <span class="input-group-btn">
                       <button class="btn btn-primary" id="submit-user-location" type="submit">Go!</button>
                     </span>
                   </div>
            </form>
              
            <form id="user-password-form" class="form" action="" style="display: none">                   
                   <div class="input-group input-group-lg">
                     <input type="text" class="form-control user-signup" id="user-password" placeholder="Finally - choose a memorable password!">
                     <span class="input-group-btn">
                       <button class="btn btn-primary" id="submit-user-password" type="submit">Go!</button>
                     </span>
                   </div>
            </form>
                         
              </p>
    
        </script>
        
        
        <div id="clients_in_room_container"></div>
     
        <script type="text/template" id="clients_in_room_template">  
            <p>
                <h1><em>Room</em>: <strong><span id="room-name"><%= roomName %></span></strong></h1>
            </p>
            
            <p>
                <!--<h2>Who's in this room?</h2>-->
                <ul class="list-group" id="clients-in-room"></ul>
            </p>
        </script>
                                
                         
        <div id="message_form_container"></div>
        
        <script type="text/template" id="message_form_template">
                          
            <p>        
                <form class="form" action="">                   
                   <div class="input-group input-group-lg">
                     <input type="text" class="form-control" id="message-text" placeholder="What's up, <%= username %>?">
                     <span class="input-group-btn">
                       <button class="btn btn-primary" id="submit-message" type="submit">Go!</button>
                     </span>
                   </div>
                </form>
            </p> 
        </script>
            
            
        <div id="app_controls_container"></div>
        
        <script type="text/template" id="app_controls_template">
            <p>
               <div class="btn-group-horizontal button-wrapper">
                
                    <div class="col-xs-15">            
                        <i class="fa fa-microphone action-icon" data-toggle="tooltip" title="Record Live Audio" id="start-recording" title="Record Live Audio" aria-hidden="true"></i>
                        <i class="fa fa-stop-circle-o action-icon" data-toggle="tooltip" title="Stop Recording" id="stop-recording" type="submit" style="display: none"></i>
                    </div>
                    
                    <div class="col-xs-15">
                        <input id="audio-file" type="file" accept="audio/mp3, audio/wav" style="display: none"/>
                        <i class="fa fa-file-audio-o action-icon" data-toggle="tooltip" title="Stream MP3 or WAV" id="start-file-stream" title="Stream MP3 or WAV File" aria-hidden="true"></i>  
                    </div>
                    
                    <div class="col-xs-15">   
                        <i class="fa fa-headphones action-icon" data-toggle="tooltip" title="Listen" id="listen" title="Listen" aria-hidden="true"></i>
                    </div>
                    
                    <div class="col-xs-15">
                        <input id="file" type="file" style="display: none"/>
                        <i class="fa fa-upload action-icon" data-toggle="tooltip" title="File Transfer" id="send-file" title="File Transfer" aria-hidden="true"></i>
                     </div>           
                    
                    <div class="col-xs-15">
                        <i class="fa fa-ban action-icon" data-toggle="tooltip" title="Stop All Audio" id="stop" title="Stop All Audio" aria-hidden="true"></i>
                    </div>  
                          
               </div>
           </p>
        </script>
        
        
        <div class="col-xs-12">    
            
        <div id="connected_clients_container"></div>
        
            <script type="text/template" id="connected_clients_template">
                 <p>
                    <h2>Who's Online?</h2>
                    <ul class="list-group" id="connected-clients"></ul>
                </p>
            </script>

            <script type="text/template" id="user_list_item_template">
                <li class="list-group-item <%= cssClass %>" data-user-id="<%= userId %>"><strong><%= time %></strong> <%= contentFromUsername %> <strong><%= contentName %></strong>
                <i class="fa fa-plus pull-right <%= actionIconsClass %>" data-toggle="tooltip" title="Connect With <%= userName %>!" aria-hidden="true" data-user-name="<%= userName %>" data-user-id="<%= userId %>"></i>
                </li>
           </script>
            
            
            <div id="welcome_modal_container"></div>
            
            <script type="text/template" id="welcome_modal_template">
                <div class="modal fade welcome-modal">
                    <div class="modal-dialog" role="document">
                      <div class="modal-content">
                        <div class="modal-header">
                          <button type="button" id="close-invitation-modal" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                          </button>
                          <h1 class="modal-title">Welcome to <strong>listentome.io!</strong></h1>
                        </div>
                        <div class="modal-body">
                            <p><h1 class="text-wrap">You're now part of a growing online community, giving producers and artists <strong>real time</strong> musical feedback on their latest creations.</h1></p>           
                        </div>
                        
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary pull-left">FAQ</button>
                            <button type="button" class="btn btn-secondary pull-left">Terms</button>
                          <button type="button" class="btn btn-primary" data-dismiss="modal">Just start the action!</button>
                        </div>
                      </div><!-- /.modal-content -->
                    </div><!-- /.modal-dialog -->
                  </div><!-- /.modal -->
            </script>
            
            
            <div id="rooms_modal_container"></div>
            
            <script type="text/template" id="rooms_modal_template">
                <div class="modal fade rooms-modal">
                    <div class="modal-dialog" role="document">
                      <div class="modal-content">
                        <div class="modal-header">
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                          </button>
                          <h1 class="modal-title"><%= modalHeaderContent %></h1>
                        </div>
                        <div class="modal-body">
    
                        <form id="create-room-with-user-form" data-target-user-id="<%= targetUserId %>" data-target-user-name="<%= targetUsername %>" class="form  <%= textInputClass %>" action="">                   
                           <div class="input-group input-group-lg w-100">
                             <input type="text" class="form-control create-room-from-users-name <%= textInputClass %>" data-target-user-id="<%= targetUserId %>" data-target-user-name="<%= targetUsername %>" placeholder="What do you want to call your room?">
                            <h1>
                                <span class="create-room-from-users-result" style="display: none"></span>
                            </h1>
                           </div>
                  
                        </div>
                        
                        <div class="modal-footer">
                          <!--<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>-->
                          <button type="submit" class="btn btn-primary" id="create-room-from-users" data-target-user-id="<%= targetUserId %>" data-target-user-name="<%= targetUsername %>">Send Request!</button>
                          </form>
            
                        </div>
                      </div><!-- /.modal-content -->
                    </div><!-- /.modal-dialog -->
                  </div><!-- /.modal -->
            </script>
            
            
            <div id="invitation_modal_container"></div>
            
            <script type="text/template" id="invitation_modal_template">
                <div class="modal fade invitation-modal">
                    <div class="modal-dialog" role="document">
                      <div class="modal-content">
                        <div class="modal-header">
                          <button type="button" id="close-invitation-modal" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                          </button>
                          <h1 class="modal-title">Invitation to <strong><%= invitationTo %></strong></h1>
                        </div>
                        <div class="modal-body">
                    
                            <h1><strong><%=invitedByUsername %></strong> would like to connect!<br>Do you accept?</h1>
                        
                        </div>
                        
                        <div class="modal-footer">
                          <!--<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>-->
                          <button type="submit" class="btn btn-primary" id="accept-room-invitation" data-invited-by-user-id="<%= invitedByUserId %>" data-join-room-id="<%= joinRoomId %>">Accept Request</button>
                           <button type="submit" class="btn btn-info" id="decline-room-invitation" data-invited-by-user-id="<%= invitedByUserId %>" data-join-room-id="<%= joinRoomId %>">Sorry, I'm Busy!</button>        
                        </div>
                      </div><!-- /.modal-content -->
                    </div><!-- /.modal-dialog -->
                  </div><!-- /.modal -->
            </script>
            
                              
            <div id="messages_container"></div>
             
            <script type="text/template" id="messages_template">
  
                <p>
                    <h2>Feedback</h2>
                </p>
                      
                <p>
                    <ul class="list-group scrollable" id="message-results">
                        <li class="list-group-item small feedback-placeholder"><em>Feedback will appear here!</em></li>
                    </ul>
                </p>
            </script>
            
            <div id="rooms_container"></div>
        
            <script type="text/template" id="rooms_template">
                 <p>
                    <h2 id="rooms-list-header">Your Rooms</h2>
                    <ul class="list-group" id="available-rooms"></ul>
                    <!--<i class="fa fa-plus action-icon" data-toggle="tooltip" title="Create Room" id="open-create-room-form" aria-hidden="true"></i>-->
                </p> 
            </script>
       
            
            <div id="rooms_form_container"></div>
            
            <script type="text/template" id="rooms_form_template">
                 <p>
                    <form id="create-room-form" class="form" action="">                   
                       <div class="input-group input-group-lg">
                         <input type="text" class="form-control" id="new-room-name" placeholder="What do you want to call your room?">
                         <span class="input-group-btn">
                           <button class="btn btn-primary" id="create-room" type="submit">Go!</button>
                         </span>
                       </div>
                   </form>
                    </p>
            </script>
          
                   
           <script type="text/template" id="list_item_template">
                <li class="list-group-item <%= cssClass %>" data-id="<%= messageId %>" style="background-color: <%= backgroundColour %>"><strong><%= time %></strong> <%= contentFromUsername %> <strong><%= contentName %></strong>
                <i class="fa fa-refresh fa-spin <%= loaderClass %>" title="Loading..." aria-hidden="true" data-id=""></i>
                </li>
           </script>
           
              
            <script type="text/template" id="room_list_item_template">
                <li class="list-group-item <%= cssClass %>" data-room-id="<%= roomId%>">
                    <div>
                    <span class="<%= linkClass %>" data-toggle="tooltip" title="Enter Room" data-room-id="<%= roomId%>" data-room-name="<%= roomName%>"><strong><%= roomName %></strong></span>
                    <span class="badge message-counter" data-toggle="tooltip" title="<%= messageCount %> Messages" data-room-id="<%= roomId%>"><%= messageCount %></span>
                    <i class="fa fa-rocket pull-right <%= linkClass %>" data-room-id="<%= roomId%>" data-room-name="<%= roomName%>" data-toggle="tooltip" title="Enter Room" aria-hidden="true"></i>
                    </div>
               </li>
            </script>
           
        </div>


            <iframe name="download-iframe" id="download-iframe" width="1" height="1" frameborder="0" src=""></iframe>


            </div>
        </div>
    </div>
        

        <!-- CORE DEPENDENCIES -->
        <script src="/vendor/jquery-2.0.3.min.js"></script>
        <script src="/vendor/underscore.js"></script>
        <script src="/vendor/backbone.js"></script>
        
        <!-- BOOTSTRAP -->
        <script src="/vendor/tether.min.js"></script>
        <script src="/vendor/bootstrap.js"></script>
        <script src="/vendor/bootstrap-slider.js"></script>
        
        <!--<script src="/vendor/jquery-ui.js"></script>-->
        
        <!-- SOCKET.IO -->
        <script src="/socket.io/socket.io.js"></script>
        <script src="/vendor/socket.io-stream.js"></script>
        
        <!-- APP UTILS and AUDIO FUNCTIONS -->
        <script src="/js/functions/utils.js"></script>
        <script src="/js/functions/playMp3Stream.js"></script>
        <script src="/js/functions/playWavStream.js"></script>
        <script src="/js/functions/recordStream.js"></script>
        
        <!-- START THE APP -->
        <script src="/js/index.js"></script>
        
        <!-- BACKBONE VIEWS -->
        <script src="/js/views/usernameFormView.js"></script>
        <script src="/js/views/audioPlayerView.js"></script>
        <script src="/js/views/userListItemView.js"></script>
        <script src="/js/views/connectedClientsView.js"></script>
        <script src="/js/views/clientsInRoomView.js"></script>
        <script src="/js/views/roomsFormView.js"></script>
        <script src="/js/views/roomsView.js"></script>
        <script src="/js/views/roomListItemView.js"></script>
        <script src="/js/views/welcomeModalView.js"></script>
        <script src="/js/views/roomsModalView.js"></script>
        <script src="/js/views/acceptInvitationModalView.js"></script>
        <script src="/js/views/messageFormView.js"></script>
        <script src="/js/views/appControlsView.js"></script>
        <script src="/js/views/listItemView.js"></script>
        <script src="/js/views/messagesView.js"></script>
        
        <!--CONTAINER VIEWS FOR ROUTES-->
        <script src="/js/views/signupView.js"></script>
        <script src="/js/views/homeView.js"></script>
        <script src="/js/views/insideRoomView.js"></script>
        
         <!--ROUTER-->
        <script src="/js/routes/appRouter.js"></script>
        
    </body>
</html>